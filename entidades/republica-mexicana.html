<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO -->
  <title>SIARHE | Distribuci√≥n de Profesionales de Enfermer√≠a en M√©xico</title>
  <meta name="description" content="Mapa y tabla interactiva de la distribuci√≥n de profesionales de enfermer√≠a en M√©xico: totales nacionales, entidades federativas y tasas por nivel en el a√±o actual." />
  <meta name="keywords" content="enfermer√≠a, salud, SIARHE, enfermeras, M√©xico, distribuci√≥n, mapa, 2025" />
  <meta name="author" content="Secretar√≠a de Salud - Direcci√≥n General de Calidad y Educaci√≥n en Salud - Direcci√≥n de Enfermer√≠a" />

  <!-- Estilos -->
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="../styles/mapas.css" />

  <!-- Librer√≠as externas -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- Layout general y script del mapa nacional -->
  <script src="../scripts/inyectar-layout.js"></script>
  <script type="module" src="../scripts/maps/republica-mexicana.js"></script>
</head>

<body>
  <main>

    <!-- Migas de pan -->
    <nav aria-label="breadcrumb" class="migas">
      <a href="../index.html">Inicio</a> &gt;
      <span>Rep√∫blica Mexicana</span>
    </nav>

    <!-- SECCI√ìN PRINCIPAL DEL MAPA NACIONAL -->
    <section class="mapa-entidad">
      <h1>¬øCu√°ntas enfermeras hay en M√©xico en <span class="year"></span>?</h1>
      <p class="bienvenida">
        En el a√±o <span class="year"></span>, M√©xico cuenta con un total de
        <strong><span id="total-enfermeras-nac">‚Äî</span> enfermeras</strong>
        distribuidas en <strong><span id="total-entidades">‚Äî</span> entidades federativas</strong>,
        de acuerdo con datos oficiales del Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE).
      </p>

      <h2>Distribuci√≥n de enfermeras por entidad federativa en <span class="year"></span></h2>
      <p>
        Utiliza los botones de zoom (+/‚Äì) para acercar o alejar el mapa. Al colocar el cursor sobre una entidad federativa,
        podr√°s ver el valor del indicador seleccionado. Activa los <em>marcadores</em> para visualizar cl√≠nicas u otros puntos
        de inter√©s; sus tooltips muestran la misma vista estandarizada que en el mapa de Cl√≠nicas de Cat√©teres.
      </p>
      <!-- Barra de controles -->
      <div id="barra-controles" class="controles-grid">
        <!-- Indicador: tu componente lo INYECTA aqu√≠ y crea el <select id="sel-metrica"> -->
        <div id="indicador-control"></div>

        <!-- Selector de marcadores (lo llena el JS con renderMarcadoresControl) -->
        <div id="control-marcadores"></div>
      </div>
      <!-- Contenedor del mapa -->
      <div id="mapa-nacional" class="mapa-wrapper">
        <!-- Aqu√≠ se inyecta el SVG din√°micamente -->
        <div class="zoom-controles"></div>
      </div>

      <!-- Nota y fuente -->
      <p id="nota">
        <strong>Nota:</strong>
        Las tasas se calculan con base en el Censo de Poblaci√≥n y Vivienda 2020 (INEGI)
        y en los registros del Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE),
        con corte estad√≠stico al 23 de abril de 2025. Los intervalos de color se establecen
        con base en el valor m√≠nimo, los cuartiles (Q1, Q2 o mediana y Q3) y el valor m√°ximo de la distribuci√≥n.
        <br />
        <strong>Fuente:</strong>
        Direcci√≥n de Enfermer√≠a & Direcci√≥n General de Calidad y Educaci√≥n en Salud. (abril, 2025).
        Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE) [Sistema Inform√°tico]. Secretar√≠a de Salud.
      </p>

      <!-- Botones de descarga del mapa -->
      <div class="descarga-container">
        <button id="descargar-sin-etiquetas" class="boton">üó∫Ô∏è Descargar üó∫Ô∏è</button>
        <button id="descargar-con-etiquetas" class="boton">üìù Descargar üìù</button>
      </div>
    </section>

    <!-- SECCI√ìN DE TABLA DIN√ÅMICA NACIONAL -->
    <section class="tabla-nacional">
      <h2>Tasa de enfermeras por entidad federativa <span class="year"></span></h2>
      <p>
        La tabla se actualiza seg√∫n el indicador seleccionado (por ejemplo, Tasa total, 1er nivel, 2¬∫ nivel, etc.).
        Al elegir <strong>Poblaci√≥n</strong>, se muestra solo la poblaci√≥n y las columnas de enfermeras/tasa se indican con <strong>‚Äì</strong>.
      </p>

      <div class="tabla-scroll">
        <div id="tabla-contenido">
          <!-- La tabla se inyecta din√°micamente desde JS -->
        </div>
      </div>

      <div class="descarga-container">
        <button id="descargar-excel" class="boton">üì• Descargar Excel</button>
      </div>
    </section>
  </main>

  <!-- Script peque√±o para inyectar el a√±o en .year ASAP -->
  <script>
    (function () {
      var y = new Date().getFullYear();
      document.querySelectorAll('.year').forEach(function (el) { el.textContent = y; });
    })();
  </script>

  <!-- üîß INVOCACI√ìN DEL CONTROL DE INDICADOR -->
  <script type="module">
    // Aseg√∫rate de que esta ruta apunte a tu componente real:
    // (usa la misma que tengas en otras p√°ginas donde s√≠ aparece el indicador)
    import { renderIndicadorControl } from "../scripts/componentes/indicador-control.js";

    // Renderiza el selector dentro de #indicador-control
    // El componente debe crear internamente <select id="sel-metrica"> con tus opciones est√°ndar.
    renderIndicadorControl("#indicador-control");
  </script>
</body>
</html>

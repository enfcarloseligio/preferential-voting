<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO -->
  <title>SIARHE | Distribuci√≥n de Profesionales de Enfermer√≠a en Chihuahua</title>
  <meta name="description" content="Mapa y tabla interactiva de la distribuci√≥n de profesionales de enfermer√≠a en Chihuahua por municipio e indicador seleccionado." />

  <!-- Estilos -->
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="../styles/mapas.css" />

  <!-- Libs -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- Layout general -->
  <script src="../scripts/inyectar-layout.js"></script>
  <!-- Script del mapa de Chihuahua -->
  <script type="module" src="../scripts/maps/chihuahua.js"></script>
</head>

<body>
  <main>
    <nav aria-label="breadcrumb" class="migas">
      <a href="../index.html">Inicio</a> &gt;
      <a href="../republica-mexicana.html">Rep√∫blica Mexicana</a> &gt;
      <span>Chihuahua</span>
    </nav>

    <section class="mapa-entidad">
      <h1>¬øCu√°ntas enfermeras hay en Chihuahua en <span class="year"></span>?</h1>
      <p class="bienvenida">
        En el a√±o <span class="year"></span>, Chihuahua cuenta con
        <strong><span id="total-enfermeras-ent">‚Äî</span> enfermeras</strong>
        distribuidas en sus municipios, seg√∫n el SIARHE.
      </p>

      <h2>Distribuci√≥n por municipio en <span class="year"></span></h2>
      <p>
        Selecciona el indicador en el control inferior. Usa (+/‚Äì) para zoom. Al pasar el cursor sobre un municipio ver√°s el valor del indicador.
        Puedes activar <em>marcadores</em> (cl√≠nicas, etc.) si est√°n disponibles.
      </p>

      <div id="barra-controles" class="controles-grid">
        <div id="indicador-control"></div>
        <div id="control-marcadores"></div>
      </div>

      <div id="mapa-entidad" class="mapa-wrapper">
        <div class="zoom-controles"></div>
      </div>

      <p id="nota">
        <strong>Nota:</strong> Tasas calculadas con poblaci√≥n INEGI 2020 y SIARHE (corte vigente).
        Los intervalos de color usan min, cuartiles (Q1, mediana, Q3) y m√°ximo de la distribuci√≥n municipal.
        <br/><strong>Fuente:</strong> Direcci√≥n de Enfermer√≠a ‚Äì DGCES. SIARHE.
      </p>

      <div class="descarga-container">
        <button id="descargar-sin-etiquetas" class="boton">üó∫Ô∏è Descargar üó∫Ô∏è</button>
        <button id="descargar-con-etiquetas" class="boton">üìù Descargar üìù</button>
      </div>
    </section>

    <section class="tabla-nacional">
      <h2>Tabla municipal (<span class="year"></span>)</h2>
      <p>Se actualiza seg√∫n el indicador seleccionado.</p>
      <div class="tabla-scroll"><div id="tabla-contenido"></div></div>
      <div class="descarga-container"><button id="descargar-excel" class="boton">üì• Descargar Excel</button></div>
    </section>
  </main>

  <script>
    (function () {
      const y = new Date().getFullYear();
      document.querySelectorAll('.year').forEach(el => el.textContent = y);
    })();
  </script>

  <!-- Control de indicador -->
  <script type="module">
    import { renderIndicadorControl } from "../scripts/componentes/indicador-control.js";
    renderIndicadorControl("#indicador-control");
  </script>
</body>
</html>

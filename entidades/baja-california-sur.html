<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO -->
  <title>SIARHE | DistribuciÃ³n de Profesionales de EnfermerÃ­a en Baja California Sur</title>
  <meta name="description" content="Mapa y tabla interactiva de la distribuciÃ³n de profesionales de enfermerÃ­a en Baja California Sur por municipio e indicador seleccionado." />

  <!-- Estilos -->
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="../styles/mapas.css" />

  <!-- Libs -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- Layout general -->
  <script src="../scripts/inyectar-layout.js"></script>
  <!-- Script del mapa de Baja California Sur -->
  <script type="module" src="../scripts/maps/baja-california-sur.js"></script>
</head>

<body>
  <main>
    <nav aria-label="breadcrumb" class="migas">
      <a href="../index.html">Inicio</a> &gt;
      <a href="../republica-mexicana.html">RepÃºblica Mexicana</a> &gt;
      <span>Baja California Sur</span>
    </nav>

    <section class="mapa-entidad">
      <h1>Â¿CuÃ¡ntas enfermeras hay en Baja California Sur en <span class="year"></span>?</h1>
      <p class="bienvenida">
        En el aÃ±o <span class="year"></span>, Baja California Sur cuenta con
        <strong><span id="total-enfermeras-ent">â€”</span> enfermeras</strong>
        distribuidas en sus municipios, segÃºn el SIARHE.
      </p>

      <h2>DistribuciÃ³n por municipio en <span class="year"></span></h2>
      <p>
        Selecciona el indicador en el control inferior. Usa (+/â€“) para zoom. Al pasar el cursor sobre un municipio verÃ¡s el valor del indicador.
        Puedes activar <em>marcadores</em> (clÃ­nicas, etc.) si estÃ¡n disponibles.
      </p>

      <div id="barra-controles" class="controles-grid">
        <div id="indicador-control"></div>
        <div id="control-marcadores"></div>
      </div>

      <div id="mapa-entidad" class="mapa-wrapper">
        <div class="zoom-controles"></div>
      </div>

      <p id="nota">
        <strong>Nota:</strong> Tasas calculadas con poblaciÃ³n INEGI 2020 y SIARHE (corte vigente).
        Los intervalos de color usan min, cuartiles (Q1, mediana, Q3) y mÃ¡ximo de la distribuciÃ³n municipal.
        <br/><strong>Fuente:</strong> DirecciÃ³n de EnfermerÃ­a â€“ DGCES. SIARHE.
      </p>

      <div class="descarga-container">
        <button id="descargar-sin-etiquetas" class="boton">ğŸ—ºï¸ Descargar ğŸ—ºï¸</button>
        <button id="descargar-con-etiquetas" class="boton">ğŸ“ Descargar ğŸ“</button>
      </div>
    </section>

    <section class="tabla-nacional">
      <h2>Tabla municipal (<span class="year"></span>)</h2>
      <p>Se actualiza segÃºn el indicador seleccionado.</p>
      <div class="tabla-scroll"><div id="tabla-contenido"></div></div>
      <div class="descarga-container"><button id="descargar-excel" class="boton">ğŸ“¥ Descargar Excel</button></div>
    </section>
  </main>

  <script>
    (function () {
      var y = new Date().getFullYear();
      document.querySelectorAll('.year').forEach(el => el.textContent = y);
    })();
  </script>

  <!-- Control de indicador -->
  <script type="module">
    import { renderIndicadorControl } from "../scripts/componentes/indicador-control.js";
    renderIndicadorControl("#indicador-control"); // crea <select id="sel-metrica">
  </script>
</body>
</html>
